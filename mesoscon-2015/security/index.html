<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Securing your Mesos Cluster</title>

		<meta name="description" content="Securing your Mesos Cluster">
		<meta name="author" content="Adam">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/mesosphere.css" id="theme">

    <link href="font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
        <section data-background="assets/cover-alt.jpg">
					<h2>Securing your Mesos Cluster</h2>
          <p><a href="mailto:adam@mesosphere.io">Adam Bordelon</a>, <a href="mailto:joris@mesosphere.io">Joris Van Remoortere</a></p>
				</section>

        <!--
          Security features are in high demand as organizations increasingly trust their Mesos clusters with critical production workloads and sensitive data, while at the same time providing cluster access to naive/untrusted users. The same questions keep coming up:
            How can Mesos prevent unauthorized users from intercepting sensitive data or forging communications?
            How can Mesos prevent unauthorized frameworks from launching malicious jobs and prevent unauthorized slaves from stealing tasks and data?
            How can Mesos ensure users and frameworks can only access their own tasks/data?
          In this first ever MesosCon security deep-dive, Adam and Joris will walk through the best practices and latest advances in securing Mesos clusters, including encryption, authentication, and authorization features.
					30min talk + 10min Qs

          [] Intro
              System Architecture Diagram (plus webUIs)
							Funny gif? (malicious hackers, naive users)
              Attack Scenarios (at least the ones from the abstract)
							Agenda/Outline

					[] Cluster-wide security
							Firewall off the entire cluster
								Either let users in through VPN
								Or funnel all commm through an authenticating proxy
							Connecting to external systems
								Zookeeper Auth
								S3, external storage
								Config services, etc.

          [] Security within Mesos
              SSL Encryption
              Authentication in Mesos
                Modules
              Authorization in Mesos
              Web UI
								HTTP Authn (current,future)
                Https
                DisableEndpoints FirewallRule?

          [] Security for your Framework
              Https for your WebUI (and REST API)
              SSL to Mesos
              Authn/z for your users

          [] Protecting your Task
              Task user (disallow root), permissions
              Protecting your data
              Isolation from other tasks

          [] Future work in the pipeline
							Authn for HTTP API (SPNEGO?)
							Modularized Authorizer, to integrate with 3rd party systems
							Authz around more actons, including Slaves (sandboxes)

          [] Conclusion: takeaways, links
        -->

        <section data-background="assets/cover-alt.jpg">
          <img src="assets/architecture-01.png"/>
          <aside class="notes"> </aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Hackers!]</h2>
          <aside class="notes"> </aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Attack Scenarios]</h2>
          <aside class="notes">
            prevent unauthorized users from intercepting sensitive data or forging communications?
            prevent unauthorized frameworks from launching malicious jobs and prevent unauthorized slaves from stealing tasks and data?
            ensure users and frameworks can only access their own tasks/data?
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Agenda]</h2>
          <aside class="notes">
						Cluster-wide security
						Security within Mesos
						Security for your Framework
						Protecting your Task
						Future Work
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Section] Cluster-wide security</h2>
          <aside class="notes"> </aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Build a (fire)wall (great wall of china img?)]</h2>
          <aside class="notes">
							Secure the perimeter!
							Firewall off the entire cluster
								Either let users in through VPN
								Or funnel all commm through an authenticating proxy
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Connecting to external services (update diagram?)]</h2>
          <aside class="notes">
								Zookeeper Auth
								S3, external storage
								Config services, etc.
								Distributing credentials to tasks?
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Section] Security within Mesos</h2>
          <aside class="notes">
							Encryption, Authentication, Authorization
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2><a href="https://github.com/apache/mesos/blob/master/docs/mesos-ssl.md">SSL</a></h2>
          <h3> <ul style="line-height: 150%">
            <li>Feature-Complete, Ready to be Tested
            <li class="fragment">All Libprocess Communication
            <li class="fragment">Using Libevent + OpenSSL
            <li class="fragment">Configurable
            <li class="fragment">Live Upgrade Support
          </ul> </h3>
<aside class="notes">
If you don't encrypt, attackers can eavesdrop, even impersonate
Libprocess uses socket interface
Implementation of socket interface using Libevent-Openssl
Protocol support and ciphers can be configured via environment variables
Environment variable to control "downgrade support". Allows heterogenous cluster during upgrade
Explain peek to dispatch to correct socket handler for upgrade support
</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <img src="assets/architecture-01.png"/>
<aside class="notes">
Point to all libprocess communication
Webui traffic also served by libprocess
Mesos only stores leading master in zookeeper
Frameworks can use zookeeper through state abstraction. Encrypt your data!
Use zookeeper authentication
</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <div>
            <h2>Configuration</h2>
            <pre><code class="shell" data-trim>
            ../configure --enable-libevent --enable-ssl
            </code></pre>
          </div>
          <br>
          <div class="fragment">
            <h2>Running</h2>
            <font size="6"><pre><code class="shell" data-trim>
SSL_ENABLED=1 SSL_KEY_FILE=key SSL_CERT_FILE=cert opt-flags binary
SSL_ENABLED=1 SSL_KEY_FILE=key SSL_CERT_FILE=cert SSL_REQUIRE_CERT=1 SSL_ENABLE_TLS_V1_1=true master.sh
            </code></pre></font>
          </div>
          <br>
          <div class="fragment">
            <h2>Upgrading</h2>
            <font size="6"><pre><code class="shell" data-trim>
// Restart each component with downgrade support (master, slave, framework):
SSL_ENABLED=1 SSL_SUPPORT_DOWNGRADE=1 SSL_KEY_FILE=key SSL_CERT_FILE=cert opt-flags binary

// Restart each component WITHOUT downgrade support (master, slave, framework):
SSL_ENABLED=true SSL_SUPPORT_DOWNGRADE=false SSL_KEY_FILE=key SSL_CERT_FILE=cert opt-flags binary
            </code></pre></font>
          </div>
<aside class="notes">
Make sure to re-bootstrap and make a clean build
The SSL configuration flags can be changed by the environment variables
During live cluster upgrade, use SSL_SUPPORT_DOWNGRADE=true to maintain communication during transition
Explain webui issues with running HTTP and HTTPS simultaneously
Check out the ssl guide on the mesos documentation website for more info
</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>Scalability improvements planned</h2>
          <br>
          <h2 class="fragment">Try it out, let us know what you think!</h2>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>Authentication</h2>
          <aside class="notes">
						Default crammd5 authentication
							What it does and why (no rogue slaves/fwks)
							(build with sasl, enable flags)
						Modules
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>Authorization and ACLs</h2>
          <aside class="notes">
						Current ACLs, how to enable, what they do
						WebUI ACLs too
						Modularizing
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>WebUI Security</h2>
          <aside class="notes">Joris
						HTTP Authn (current, future)
						HTTPS
						DisableEndpoints FirewallRule
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Section] Security for your Framework</h2>
          <aside class="notes">Joris
              Https for your WebUI (and REST API)
              SSL to Mesos
              Authn/z for your users
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Section] Protecting your Task</h2>
          <aside class="notes">Joris
              Task user (disallow root), permissions
              Protecting your data
              Isolation from other tasks
					</aside>
        </section>

        <section data-background="assets/cover-alt.jpg">
          <h2>[Section] Future work</h2>
          <aside class="notes">
							Authn for HTTP API (SPNEGO?)
							Modularized Authorizer, to integrate with 3rd party systems
							Authz around more actons, including Slaves (sandboxes)
							JIRA links?
					</aside>
        </section>

        <section data-background="assets/sf.jpg">
          <h2>Learn More!</h2>
          <table>
          <tr>
          <td style="vertical-align: top;">
          <img src="assets/mesos.png"/></td>
          <td style="vertical-align: middle;">
            <p><a href="http://mesos.apache.org">http://mesos.apache.org</a></p>
            <p><a href="https://github.com/apache/mesos">https://github.com/apache/mesos</a></p>
            <p><a href="mailto://user@mesos.apache.org">user@</a>,
               <a href="mailto://dev@mesos.apache.org">dev@mesos.apache.org</a></p>
            <p><a href="http://mesosphere.com/careers">http://mesosphere.com/careers</a></p>
          </td>
          </tr>
          </table>
          <aside class="notes">
						Takeaways
					</aside>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: false,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
